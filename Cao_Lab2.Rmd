---
title: "Cao_Lab2"
author: "Amanda Cao"
date: "2024-09-16"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
rm(list=ls()) # clear environment
options(scipen=999) # prevent scientific notations
```

## NA Counts 
Since Linkedin Learning is no longer accessible, I do not have access to the Chicago Dataset.

## Exercises 5.2.4
1-1. 0.03 proportion of flights had an arrival delay of two or more hours, which corresponds to 10200 flights. This is less than flights with arrival delay between one and two hours, which is 0.05 proportion (18283 flights) of all flights.
```{r 1-1}
library(nycflights13)
library(tidyverse)

arr_delay <- filter(flights, arr_delay>=120)

prop_arr_delay <- nrow(arr_delay) / nrow(flights)
nrow(arr_delay)
prop_arr_delay

arr_delay_one_two <- filter(flights, arr_delay >= 60 & arr_delay <= 120)
prop_arr_delay_one_two <- nrow(arr_delay_one_two) / nrow(flights)
nrow(arr_delay_one_two)
prop_arr_delay_one_two
```

1-2. There are 9313 flights flying to Houston, which is fewer than the 17215 flights flying to Atlanta. Proportion of flights to Houston is 0.03 and proportion of flights to Atlanta is 0.05.
```{r 1-2}
flights_houston <- filter(flights, dest == "IAH" | dest == "HOU")

flights_atl <- filter(flights, dest =="ATL")
nrow(flights_houston)
nrow(flights_atl)

prop_houston <- nrow(flights_houston) / nrow(flights)
prop_atl <- nrow(flights_atl) / nrow(flights)
prop_houston
prop_atl
```

1-3. 0.6 proportion of flights to Atlanta were operated by Delta Airlines. Atlanta is the headquarter of Delta, so it has stronger power over the flights to Atlanta. 0.4 proportion of flights to Chicago were operated by United Airlines. Chicago is the headquarter of United, but the proportion of flights operated by United in Chicago is smaller than the one operated by Delta in Atlanta. This may be caused by a more diverse spread of market share among different airlines in Chicago; in other words, the Chicago market may be more competitive.
```{r 1-3}
flights_atl_delta <- filter(flights, dest == "ATL" & carrier == "DL")
prop_flights_atl_delta <- nrow(flights_atl_delta) / nrow(flights_atl)
prop_flights_atl_delta

flights_ord_united <- filter(flights, dest == "ORD" & carrier == "UA")
flights_ord <- flights %>% filter(dest == "ORD")
prop_flights_ord_united <- nrow(flights_ord_united) / nrow(flights_ord)
prop_flights_ord_united
```

1-7. There were 9344 flights departing between midnight and 6AM (inclusive), which is less than the 121141 flights departing between noon and 6PM (inclusive). This makes sense because most flights depart during daytime, when lighting is better.
```{r 1-7}
flights_midnight_six <- filter(flights, dep_time >= 0 & dep_time <= 600)
nrow(flights_midnight_six)
flights_noon_six <- filter(flights, dep_time >= 1200 & dep_time <= 1800)
nrow(flights_noon_six)
```

## Exercises 5.3.1
2. The most delayed flight is flight 51 to HNL, delayed by 21 hours and 41 minutes. The flight that left the earliest is flight 97 to DEN, ahead by 43 minutes.
```{r}
most_delayed_flight <- flights %>% arrange(desc(dep_delay)) %>% slice(1)
most_delayed_flight

earliest_flight <- flights %>% arrange(dep_delay) %>% slice(1)
earliest_flight
```

## Exercises 5.4.1
2. If I include the name of a variable twice in the selection function, only one instance of the variable will be kept in the resulting dataset. For example, I include two dep_time for the below selection function, but the resulting dataset only shows one column of dep_time.
```{r}
selected_flights <- flights %>% select(year, month, day, dep_time, dep_time)
head(selected_flights)
```

3. `one_of()` checks whether the variable names provided in the vector `vars` exist in the dataset. If they exist, it selects those columns. If some variable names in the vector do not exist in the dataset, `one_of()` will silently ignore them (like variable `non_existent_column`), preventing errors that would otherwise occur when using select() with non-existent column names.
```{r}
vars <- c("year", "month", "day", "dep_delay", "arr_delay", "non_existent_column")
selected_flights <- flights %>% select(one_of(vars))
selected_flights
```


